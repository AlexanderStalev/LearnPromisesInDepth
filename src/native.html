<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <script>
                    function later(){
                      setTimeout(function(){
                          console.log('next tick');
                      },0);  
                    }
                    
                    later();
                    
                    requestAnimationFrame(function(){
                        console.log('next requestAnimationFrame tick'); 
                    });
                    
                    Promise.resolve(1)
                            .then(function(a){
                                console.log('then');
                                later();
                                throw 2;
                            })
                            .catch(function(a){
                                console.log('catch');
                                later();
                            })
                            .then(function(a){
                                console.log('then 2');
                                later();
                            });
                            
                    console.log('after');         
                            
                             requestAnimationFrame(function(){
                        console.log('next requestAnimationFrame tick'); 
                    });
                            
                    later();
    </script>
</head>

<body ng-app="app">

</body>

</html>